namespace Nancy.Formatters.Tests
{
<<<<<<< /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var1_1628126045623742893
    using System.IO;
    using System.Net;
    using System.Xml;
    using FakeItEasy;
    using Nancy.Formatters.Tests.Fakes;
    using Nancy.Tests;
    using Xunit;

=======
    using System.IO;
    using System.Net;
    using System.Xml;
    using FakeItEasy;
    using Fakes;
    using Nancy.Tests;
    using Xunit;

>>>>>>> /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var2_3374099437830613657
    public class XmlFormatterExtensionsFixtures
    {
        private readonly IResponseFormatter formatter;
        private readonly Person model;
        private readonly Response response;

        public XmlFormatterExtensionsFixtures()
        {
<<<<<<< /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var1_1628126045623742893
            this.formatter = A.Fake<IResponseFormatter>();
            this.model = new Person { FirstName = "Andy", LastName = "Pike" };
            this.response = this.formatter.AsXml(model);
=======
            formatter = A.Fake<IResponseFormatter>();
            model = new Person
            {
                FirstName = "Andy",
                LastName = "Pike"
            }; 
            response = formatter.AsXml(model);
>>>>>>> /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var2_3374099437830613657
        }

        [Fact]
        public void Should_return_a_response_with_the_standard_xml_content_type()
        {
            response.ContentType.ShouldEqual("text/xml");
        }

        [Fact]
        public void Should_return_a_response_with_status_code_200_OK()
        {
            response.StatusCode.ShouldEqual(HttpStatusCode.OK);
        }

        [Fact]
        public void Should_return_a_valid_model_in_xml_format()
        {
            using (var stream = new MemoryStream())
            {
                response.Contents(stream);
<<<<<<< /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var1_1628126045623742893

                var root = GetXmlRoot(stream);

                root.Name.ShouldEqual("Person");
                root.ChildNodes.Count.ShouldEqual(2);
                root.SelectSingleNode("//Person/FirstName").InnerText.ShouldEqual("Andy");
                root.SelectSingleNode("//Person/LastName").InnerText.ShouldEqual("Pike");
=======

                XmlElement root = GetXmlRoot(stream);

                root.Name.ShouldEqual("Person");
                root.ChildNodes.Count.ShouldEqual(2);
                root.SelectSingleNode("//Person/FirstName").InnerText.ShouldEqual("Andy");
                root.SelectSingleNode("//Person/LastName").InnerText.ShouldEqual("Pike");
>>>>>>> /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var2_3374099437830613657
            }
        }

        [Fact]
        public void Should_return_a_null_in_xml_format()
        {
            using (var stream = new MemoryStream())
            {
<<<<<<< /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var1_1628126045623742893
                formatter.AsXml<Person>(null).Contents(stream);

                var root = GetXmlRoot(stream);
                root.GetAttribute("nil", "http://www.w3.org/2001/XMLSchema-instance").ShouldEqual("true");
                root.ChildNodes.Count.ShouldEqual(0);
=======
                formatter.AsXml<Person>(null).Contents(stream);

                XmlElement root = GetXmlRoot(stream);
                root.GetAttribute("nil", "http://www.w3.org/2001/XMLSchema-instance").ShouldEqual("true");
                root.ChildNodes.Count.ShouldEqual(0);
>>>>>>> /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var2_3374099437830613657
            }
        }
<<<<<<< /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var1_1628126045623742893

        private static XmlElement GetXmlRoot(Stream stream)
        {
            stream.Position = 0;
            var xml = new XmlDocument();
            xml.Load(stream);

            return xml.DocumentElement;
        }
=======

        private XmlElement GetXmlRoot(Stream stream)
        {
            stream.Position = 0;
            var xml = new XmlDocument();
            xml.Load(stream);

            return xml.DocumentElement;
        }
>>>>>>> /mnt/Vbox/FSTMerge/binary/fstmerge_tmp1390771188069/fstmerge_var2_3374099437830613657
    }
}

